<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit [[${pet.name}]]</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link th:href="@{/css/styles.css}" rel="stylesheet">
    <link th:href="@{/css/create_pet.css}" rel="stylesheet">
    <script defer th:src="@{/js/create_pet.js}"></script>
</head>
<body>
<div th:replace="fragments/nav :: navbar"></div>

<main>
    <section class="hero">
        <div class="container">
            <h1>Edit: <span th:text="${pet.name}">Pet</span></h1>
            <p class="muted">Update details for this listing.</p>
        </div>
    </section>

    <section class="container">

        <form class="card form"
              th:action="@{'/pets/' + ${petId}}"
              th:object="${pet}"
              method="post" novalidate>
            <input type="hidden" name="_method" value="put"/>

            <!-- SAME FORM BODY AS CREATE (copy/paste your create form fields) -->
            <!-- Top split -->
            <div class="form-grid">
                <div class="stack">
                    <h2 class="form-section">Basic info</h2>

                    <label class="field" for="name">
                        <span>Name <em class="req">*</em></span>
                        <input id="name" type="text" th:field="*{name}" required>
                        <small class="err" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Name error</small>
                    </label>

                    <div class="grid-2">
                        <label class="field" for="species">
                            <span>Species <em class="req">*</em></span>
                            <input id="species" type="text" th:field="*{species}" required>
                            <small class="err" th:if="${#fields.hasErrors('species')}" th:errors="*{species}">Species
                                error</small>
                        </label>

                        <label class="field" for="breed">
                            <span>Breed</span>
                            <input id="breed" type="text" th:field="*{breed}">
                            <small class="err" th:if="${#fields.hasErrors('breed')}" th:errors="*{breed}">Breed
                                error</small>
                        </label>
                    </div>

                    <div class="grid-3">
                        <label class="field" for="age">
                            <span>Age (years)</span>
                            <input id="age" type="number" min="0" th:field="*{age}">
                            <small class="err" th:if="${#fields.hasErrors('age')}" th:errors="*{age}">Age error</small>
                        </label>

                        <label class="field" for="status">
                            <span>Status <em class="req">*</em></span>
                            <select id="status" th:field="*{status}" required>
                                <option value="" disabled th:selected="${pet.status} == null">Select status</option>
                                <option th:each="s : ${statuses}" th:value="${s}"
                                        th:text="${#strings.replace(s.name(),'_',' ')}"></option>
                            </select>
                            <small class="err" th:if="${#fields.hasErrors('status')}" th:errors="*{status}">Status
                                error</small>
                        </label>

                        <label class="field" for="location">
                            <span>Location <em class="req">*</em></span>
                            <input id="location" type="text" th:field="*{location}" required>
                            <small class="err" th:if="${#fields.hasErrors('location')}" th:errors="*{location}">Location
                                error</small>
                        </label>
                    </div>

                    <div class="grid-2">
                        <label class="switch">
                            <input type="checkbox" name="vaccinated" id="vaccinatedCheckbox"
                                   th:checked="${pet.vaccinated}"/>
                            <span class="slider"></span>
                            <span class="switch-label">Vaccinated</span>
                        </label>

                        <label class="field" id="priceField">
                            <span>Price (optional)</span>
                            <input type="number" step="0.01" min="0" th:field="*{price}">
                            <small class="hint muted">Hidden for “For adoption” (optional)</small>
                            <small class="err" th:if="${#fields.hasErrors('price')}" th:errors="*{price}">Price
                                error</small>
                        </label>
                    </div>
                </div>

                <div class="stack">
                    <h2 class="form-section">Photos & description</h2>

                    <div class="dropzone" aria-label="Image upload area (coming soon)">
                        <div class="img-skeleton tall"></div>
                        <p class="muted">Add/replace photos later • Drag & drop coming soon</p>
                    </div>

                    <label class="field" for="description">
                        <span>Description</span>
                        <textarea id="description" th:field="*{description}" rows="6"
                                  placeholder="Temperament, health, behavior, quirks..."></textarea>
                        <div class="muted tiny" id="desc-count">0 / 500</div>
                        <small class="err" th:if="${#fields.hasErrors('description')}" th:errors="*{description}">Description
                            error</small>
                    </label>
                </div>
            </div>

            <div class="form-actions">
                <a class="btn btn-soft" th:href="@{'/pets/' + ${petId}}">Cancel</a>
                <button class="btn btn-primary" type="submit">Save changes</button>
            </div>
        </form>

        <div class="spacer-24"></div>
    </section>
</main>

<footer class="site-footer">
    <div class="container">
        <p class="muted">© <span th:text="${#temporals.format(#temporals.createNow(),'yyyy')}">2025</span> PetPort</p>
    </div>
</footer>
</body>
</html>
